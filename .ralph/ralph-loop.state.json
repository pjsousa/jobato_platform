{
  "active": true,
  "iteration": 1,
  "minIterations": 1,
  "maxIterations": 10,
  "completionPromise": "COMPLETE",
  "tasksMode": false,
  "taskPromise": "READY_FOR_NEXT_TASK",
  "prompt": "# Story 3.6 - Agent Prompt\n\n```md\nYou are the implementation agent for Jobato. Implement Story 3.6 only.\n\nSTORY:\nStory 3.6: Model selection and activation\n\nCONTEXT FILES (read first, in order):\n@_bmad-output/implementation-artifacts/3-6-model-selection-and-activation.md\n@_bmad-output/implementation-artifacts/3-5-parallel-candidate-training-and-evaluation.md\n@_bmad-output/implementation-artifacts/3-4-pluggable-model-interface-and-registry.md\n@_bmad-output/implementation-artifacts/3-3-assign-relevance-scores-baseline.md\n@_bmad-output/planning-artifacts/epics.md\n@_bmad-output/planning-artifacts/architecture.md\n@project-context.md\n@docs/epic-3-prioritized-fix-plan-gated.md\n@docs/epic-3-fix-plan-execution-checklist.md\n\nPRIMARY GOAL:\nEnable model comparison, activation of a selected candidate, and rollback to previous versions.\n\nMANDATORY RULES:\n- Scope is Story 3.6 only.\n- Activation and rollback updates must be atomic.\n- New scoring runs must use the active model version.\n- Keep full activation history for audit.\n- Hard gate scope is backend/API/ML; frontend is soft gate.\n- If blocked, ask exactly one targeted question with a recommended default.\n\nMANDATORY IMPLEMENTATION REQUIREMENTS:\n- Add model comparison and active-model APIs.\n- Add model activation endpoint and persistence.\n- Add rollback path to previous versions.\n- Integrate scoring pipeline with active model lookup.\n- Add tests for activation/rollback and active model usage.\n\nWORKFLOW:\n1) Summarize acceptance criteria and target files.\n2) Implement code and tests.\n3) Run gate commands exactly.\n4) Return AC -> evidence mapping and risks.\n\nGATE COMMANDS:\n1) PYTHONPATH=ml python3 -m pytest ml/tests/test_model_activation.py ml/tests/test_model_selector.py\n2) ./gradlew test --tests \"com.jobato.api.controller.MlModelControllerTest\" --tests \"com.jobato.api.service.MlModelClientTest\"\n3) curl -i http://localhost:8080/api/ml/models/comparisons\n4) curl -i -X POST http://localhost:8080/api/ml/models/<modelId>/activate\n5) curl -i http://localhost:8080/api/ml/models/active\n\nPASS CRITERIA:\n- Activation tests pass.\n- Active model endpoint reflects activated model.\n- Rollback path is validated by tests.\n- Scoring pipeline records active model version.\n\nSOFT GATE (FRONTEND):\n- Validate model comparison/activation UI behavior and update frontend tests if UI changes are included.\n- Do not fail hard gate for frontend-only issues; list them as follow-up items.\n\nOUTPUT FORMAT:\n- Section 1: What changed\n- Section 2: Acceptance Criteria validation table\n- Section 3: Gate results (pass/fail per check)\n- Section 4: Risks or unresolved items\n```\n",
  "startedAt": "2026-02-13T01:55:18.471Z",
  "model": "openai/gpt-5.3-codex",
  "agent": "opencode"
}